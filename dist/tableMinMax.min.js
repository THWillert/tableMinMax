// (c) 2020 Thorsten Willert
// V2.0
// This code is licensed under MIT license
function extend(t,e){for(var r in t=t||{},e)"object"==typeof e[r]?t[r]=extend(t[r],e[r]):t[r]=e[r];return t}tableMinMax=function(t){let e,r=extend({table:"table",search:{mode:"all",nr:[1]},limit:{min:"min",max:"max"},css:{mode:"style",max:"",min:""},text:{autocontrast:!0,standard:"readable",min:"#fff",max:"#000"},colorize:"span",mode:"single",invert:!1},t),a=Number.MAX_VALUE,s=Number.MIN_VALUE,o=0,n=0,l=0,c=0,i=0,u=0,m=null,d=null,b=null,h=null;try{if(null===(m=document.querySelector(r.table)))return console.log("tableMinMax: table not found: "+r.table+"\nFunction call after table init? (e.g. end of body)"),[-1,-1];u=(d=document.querySelector(r.table+" tbody")).rows.length}catch(t){return console.error(t),[-1,-1]}m.hasAttribute("data-search-mode")&&(r.search.mode=m.getAttribute("data-search-mode")),m.hasAttribute("data-search-nr")&&(r.search.nr=m.getAttribute("data-search-nr")),m.hasAttribute("data-autocontrast")&&(r.text.autocontrast="true"===m.getAttribute("data-autocontrast")),m.hasAttribute("data-css-min")&&(r.css.min=m.getAttribute("data-css-min")),r.css.min=r.css.min.trim().replace(/\s\s+/g," "),m.hasAttribute("data-css-max")&&(r.css.max=m.getAttribute("data-css-max")),r.css.max=r.css.max.trim().replace(/\s\s+/g," "),m.hasAttribute("data-colorize")&&(r.css.max=m.getAttribute("data-colorize"));let x=r.search.nr.length;switch(r.search.mode.toString()){case"col":for(let t=0;t<x;t++){a=Number.MAX_VALUE,s=Number.MIN_VALUE;for(let l=0;l<u;l++)(e=parseFloat(d.rows[l].cells[r.search.nr[t]].innerText))>s&&(s=e,n=l),e<a&&(a=e,o=l);f(b=d.rows[o].cells[r.search.nr[t]],h=d.rows[n].cells[r.search.nr[t]],r)}break;case"row":for(let t=0;t<x;t++){a=Number.MAX_VALUE,s=Number.MIN_VALUE,i=d.rows[t].cells.length;for(let l=0;l<i;l++)(e=parseFloat(d.rows[r.search.nr[t]].cells[l].innerText))>s&&(s=e,n=l),e<a&&(a=e,o=l);f(b=d.rows[r.search.nr[t]].cells[o],h=d.rows[r.search.nr[t]].cells[n],r)}break;default:for(let t=0;t<u;t++){i=d.rows[t].cells.length;for(let r=0;r<i;r++)(e=parseFloat(d.rows[t].cells[r].innerText))>s&&(s=e,n=t,c=r),e<a&&(a=e,o=t,l=r)}f(b=d.rows[o].cells[l],h=d.rows[n].cells[c],r)}function f(t,e,r){!0===r.invert&&([t,e]=[e,t]),"span"===r.colorize?(t.innerHTML='<span class="'+r.css.min+'">'+t.innerHTML+"</span>",e.innerHTML='<span class="'+r.css.max+'">'+e.innerHTML+"</span>"):(t.className+=r.css.min,e.className+=r.css.max);try{"function"==typeof color2k.hasBadContrast?(console.log("color2k loaded"),!0===r.text.autocontrast&&(g(t,r.css.min,r.text.standard),g(e,r.css.max,r.text.standard))):console.log("color2k not loaded")}catch(t){console.log(t)}}function g(t,e,r){let a=window.getComputedStyle(document.querySelector((s=e,"."+s.split(" ").join(".")))).getPropertyValue("background-color");var s;!1===color2k.hasBadContrast(a,r)?t.style.color="#fff":t.style.color="#000"}return[a,s]};
